function getHtml(e){return new Promise(((n,t)=>{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState)switch(o.status){case 200:case 0:try{const e=(new DOMParser).parseFromString(o.responseText,"text/html");n(e)}catch(e){t(e)}break;default:t(o)}},o.onerror=t,o.open("GET",e,!1),o.send()}))}function appendNode(e,n,t){if("SCRIPT"!==n.tagName)return void e.appendChild(n);const o=document.createElement("script");if(n instanceof HTMLScriptElement&&n.src){const e=n.src;if(""!=t){const n=new URL(e);o.src=t+n.pathname.replace(/^\/+/g,"")}else o.src=e}n instanceof HTMLScriptElement&&n.type&&(o.type=n.type),o.async=!1,o.innerHTML=n.innerHTML,n.parentElement?.removeChild(n),e.appendChild(o)}function injectApp(e,n){const t=new URL(""!=e?e:location.href),o=(t.origin+t.pathname).replace(/index\.html$/,"");return getHtml(o+n).then((n=>{for(;n.head.children.length;)appendNode(document.head,n.head.children[0],""!=e?o:"");for(;n.body.children.length;)appendNode(document.body,n.body.children[0],""!=e?o:"")}))}function runInjector(){const e=new URL(location.href).search.indexOf("remote=true")>=0,n=location.href.indexOf("localhost:8080")<0||e,t="content.html";injectApp(n?"https://cto-tvd.github.io/smarttvweb/":"",t).then((()=>{console.info("[index] remote content.html successfully injected ...")})).catch((e=>{console.info("[index] error at remote content.html injection ...",e),injectApp("",t).then((()=>console.info("[index] local content.html successfully injected ..."))).catch((e=>console.info("[index] error at local content.html injection ...",e)))}))}